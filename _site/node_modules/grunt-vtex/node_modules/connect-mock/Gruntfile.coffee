module.exports = (grunt) ->
	pkg = grunt.file.readJSON('package.json')

	# Project Configuration
	grunt.initConfig
		coffee:
			main:
				files:
					'libs/connect-mock.js': 'src/connect-mock.coffee'

		watch:
			main:
				files: ['test/**', 'src/**']
				tasks: ['coffee', 'mochaTest']

		mochaTest:
			main:
				options:
					reporter: 'spec'
				src: ['test/**/*.coffee']

	#Load NPM tasks
	grunt.loadNpmTasks name for name of pkg.devDependencies when name[0..5] is 'grunt-'

	grunt.registerTask "default", ["test"]
	grunt.registerTask "test", ["coffee", "mochaTest", "watch"]
